#: import utils kivy.utils
#: import Factory kivy.factory.Factory
#: import WipeTransition kivy.uix.screenmanager.WipeTransition

<TextInput>
    multiline: False
    background_color: utils.get_color_from_hex("#FCF7F8")
    font_name: "OpenSans-Semibold"
    halign: 'center'
    valign: 'middle'
    font_size: 15
<Label>
    background_normal: ""
    background_color: (206/255, 211/255, 220/255, 1)
    color: (1, 1, 1, 1)
    font_name: "OpenSans-Semibold"
    font_size: 15
<Button>
    background_normal: ""
    background_color: utils.get_color_from_hex("#4E8098")
    font_name: "OpenSans-Semibold"
    canvas.before:
        Color:
            rgba: .5, .5, .5, 1
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height
<Spinner>
    color: (0, 0, 0, 1)
    background_color: utils.get_color_from_hex("#90C2E7")
<Popup>
    auto_dismiss: True
    background: "popupBackground.png"
    size_hint: 0.6, 0.2
    pos_hint: {"x": 0.2, "top": 0.6}
    font_name: "OpenSans-Semibold"
    title: "WARNING"
    title_color: (163/255, 22/255, 33/255, 1)
    title_align: "center"
    title_font: "OpenSans-Semibold"
    title_size: '20sp'
    separator_color: utils.get_color_from_hex("#4E8098")
<RoundedButton@Button>
    background_color: utils.get_color_from_hex("#A31621")
    color: (1, 1, 1, 1)
    size_hint_y: None
    height: 50
    font_size: 20
<LoginPopup@Popup>
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        Label:
            text: "INCORRECT LOGIN OR PASSWORD"
            color: (0, 0, 0, 1)
        Button:
            text: "OK"
            on_release: root.dismiss()
<DatePeriod@Popup>
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        Label:
            text: "INVALID DATE PERIOD"
            color: (0, 0, 0, 1)
        Button:
            text: "OK"
            on_release: root.dismiss()
<RoomNumberPopup@Popup>
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        Label:
            text: "NO SELECTED ROOM"
            color: (0, 0, 0, 1)
        Button:
            text: "OK"
            on_release: root.dismiss()
<BookWindowPopup@Popup>
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        Label:
            text: "INVALID CLIENT DATA"
            color: (0, 0, 0, 1)
        Button:
            text: "OK"
            on_release: root.dismiss()
WindowManager:
    transition: WipeTransition()
	LoginWindow:
	ActionWindow:
	DateWindow:
	RoomWindow:
	RoomWindowFloor2
	BookWindow:
	BrowserWindow:


<LoginWindow>:
	name: "loginWindow"
    login: login
    password: password
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        padding: 150
        spacing: 10
        Label:
            id: loginLabel
            text: "USERNAME:"
            color: (0, 0, 0, 1)
            font_size: 30
            size_hint_y: None
            height: 50
        TextInput:
            id: login
            hint_text: "ENTER USERNAME"
            size_hint_y: None
            height: 50
            font_size: 20
        Label:
            id: passwordLabel
            text: "PASSWORD:"
            color: (0, 0, 0, 1)
            font_size: 30
            size_hint_y: None
            height: 50
        TextInput:
            id: password
            hint_text: "ENTER PASSWORD"
            password: True
            size_hint_y: None
            height: 50
            font_size: 20
        RoundedButton:
            text: "LOGIN"
            font_size: 30
            on_release: app.root.current = root.loginPress()[1] if root.loginPress()[0] else Factory.LoginPopup().open()

<ActionWindow>:
    name: "actionWindow"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        padding: 150
        Button:
            text: "BOOK CLIENT STAY"
            on_release: app.root.current = "dateWindow"
            background_color: utils.get_color_from_hex("#90C2E7")
            color: (0, 0, 0, 1)
        Button:
            text: "BROWSE BOOKED STAYS"
            on_release: app.root.current = "browserWindow"
            background_color: utils.get_color_from_hex("#90C2E7")
            color: (0, 0, 0, 1)
        RoundedButton:
            text: "LOGOUT"
            on_release: app.root.current = "loginWindow"

<DateWindow>:
    name: "dateWindow"
    startDay: startDay
    endDay: endDay
    startMonth: startMonth
    endMonth: endMonth
    startYear: startYear
    endYear: endYear
    on_pre_enter: root.startUpdate()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    spinner: startDay
    on_enter: root.limit_spinner()
    BoxLayout:
        orientation: "vertical"
        padding: 150
        spacing: 10
        Label:
            font_size: 20
            color: (0, 0, 0, 1)
            text: "START DATE"
        GridLayout:
            cols: 3
            Spinner:
                id: startDay
                text: root.currentDay
                background_color: utils.get_color_from_hex("#90C2E7")
                size_hint_y: None
                height: 50
                values: root.daysStart
            Spinner:
                id: startMonth
                text: root.months[root.currentMonth-1]
                background_color: utils.get_color_from_hex("#90C2E7")
                size_hint_y: None
                height: 50
                on_text: root.daysInSelectedMonthForStart()
                values: root.months
            Spinner:
                id: startYear
                text: root.currentYear
                background_color: utils.get_color_from_hex("#90C2E7")
                size_hint_y: None
                height: 50
                on_text: root.daysInSelectedMonthForStart()
                values: ["2021", "2022", "2023", "2024", "2025", "2026", "2027"]
        Label:
            font_size: 20
            color: (0, 0, 0, 1)
            text: "END DATE"
        GridLayout:
            cols: 3
            Spinner:
                id: endDay
                text: root.currentDay
                background_color: utils.get_color_from_hex("#90C2E7")
                size_hint_y: None
                height: 50
                values: root.daysEnd
            Spinner:
                id: endMonth
                text: root.months[root.currentMonth-1]
                background_color: utils.get_color_from_hex("#90C2E7")
                size_hint_y: None
                height: 50
                on_text: root.daysInSelectedMonthForEnd()
                values: root.months
            Spinner:
                id: endYear
                text: root.currentYear
                background_color: utils.get_color_from_hex("#90C2E7")
                size_hint_y: None
                height: 50
                on_text: root.daysInSelectedMonthForEnd()
                values: ["2021", "2022", "2023", "2024", "2025", "2026", "2027"]
        BoxLayout:
            orientation: "horizontal"
            RoundedButton:
                text: "BACK"
                background_color: utils.get_color_from_hex("#CED3DC")
                color: (0, 0, 0, 1)
                on_release: app.root.current = root.resetToDefaults()
            RoundedButton:
                text: "SEARCH"
                on_release: app.root.current = root.searchPress() if root.wrongTimePeriod() else Factory.DatePeriod().open()


<RoomWindow>:
    name: "roomWindow"
    room1: room1
    room2: room2
    room3: room3
    room4: room4
    room5: room5
    room6: room6
    room7: room7
    room8: room8
    room9: room9
    room10: room10
    room11: room11
    room12: room12
    room13: room13
    room14: room14
    room15: room15
    room16: room16
    room17: room17
    room18: room18
    room19: room19
    room20: room20
    on_pre_enter: root.makeRedColors()

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            Button:
                id: room1
                text: "1"
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom1()
            Button:
                text: "2"
                id: room2
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom2()
            Button:
                text: "3"
                id: room3
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom3()
            Button:
                text: "4"
                id: room4
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom4()
            Button:
                text: "5"
                id: room5
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom5()
            Button:
                text: "6"
                id: room6
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom6()
            Button:
                text: "7"
                id: room7
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom7()
            Button:
                text: "8"
                id: room8
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom8()
            Button:
                text: "9"
                id: room9
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom9()
            Button:
                text: "10"
                id: room10
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom10()
        Label:
            text: "GROUND FLOOR"
            color: (0, 0, 0, 1)
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            Button:
                text: "11"
                id: room11
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom11()
            Button:
                text: "12"
                id: room12
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom12()
            Button:
                text: "13"
                id: room13
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom13()
            Button:
                text: "14"
                id: room14
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom14()
            Button:
                text: "15"
                id: room15
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom15()
            Button:
                text: "16"
                id: room16
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom16()
            Button:
                text: "17"
                id: room17
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom17()
            Button:
                text: "18"
                id: room18
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom18()
            Button:
                text: "19"
                id: room19
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom19()
            Button:
                text: "20"
                id: room20
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom20()
        BoxLayout:
            orientation: "horizontal"
            RoundedButton:
                text: "BACK"
                background_color: utils.get_color_from_hex("#CED3DC")
                color: (0, 0, 0, 1)
                on_release: app.root.current = "dateWindow"
            RoundedButton:
                text: "NEXT FLOOR"
                background_color: utils.get_color_from_hex("#4E8098")
                on_release: app.root.current = "roomWindowFloor2"
            RoundedButton:
                text: "CHOOSE"
                on_release: app.root.current = "bookWindow" if len(app.selectedRoomNumbers) else Factory.RoomNumberPopup().open()

<RoomWindowFloor2>:
    name: "roomWindowFloor2"
    room21: room21
    room22: room22
    room23: room23
    room24: room24
    room25: room25
    room26: room26
    room27: room27
    room28: room28
    room29: room29
    room30: room30
    on_pre_enter: root.makeRedColorsFloor2()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            Button:
                id: room21
                text: "21"
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom21()
            Button:
                text: "22"
                id: room22
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom22()
            Button:
                text: "23"
                id: room23
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom23()
            Button:
                text: "24"
                id: room24
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom24()
            Button:
                text: "25"
                id: room25
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom25()
        Label:
            text: "FIRST FLOOR"
            color: (0, 0, 0, 1)
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            Button:
                text: "26"
                id: room26
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom26()
            Button:
                text: "27"
                id: room27
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom27()
            Button:
                text: "28"
                id: room28
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom28()
            Button:
                text: "29"
                id: room29
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom29()
            Button:
                text: "30"
                id: room30
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.selectedRoom30()
        BoxLayout:
            orientation: "horizontal"
            RoundedButton:
                text: "BACK"
                background_color: utils.get_color_from_hex("#CED3DC")
                color: (0, 0, 0, 1)
                on_release: app.root.current = "dateWindow"
            RoundedButton:
                text: "PREVIOUS FLOOR"
                background_color: utils.get_color_from_hex("#4E8098")
                on_release: app.root.current = "roomWindow"
            RoundedButton:
                text: "CHOOSE"
                on_release: app.root.current = "bookWindow" if len(app.selectedRoomNumbers) else Factory.RoomNumberPopup().open()

<BookWindow>: # TODO checkbox invoice
    on_pre_leave: root.resetToDefaults()
	name: "bookWindow"
	firstName: firstName
	lastName: lastName
	email: email
	telephone: telephone
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
	BoxLayout:
        size: root.width, root.height
	    orientation: "vertical"
        padding: 30
        spacing: 10
        Label:
            text: "CLIENT INFORMATION"
            font_size: 20
            color: (0, 0, 0, 1)
        GridLayout:
            cols: 2
            spacing: 10
            Label:
                id: firstNameLabel
                text: "FIRST NAME:"
                color: (0, 0, 0, 1)
            TextInput:
                id: firstName
                hint_text: "ENTER FIRST NAME"
            Label:
                id: lastNameLabel
                text: "LAST NAME:"
                color: (0, 0, 0, 1)
            TextInput:
                id: lastName
                hint_text: "ENTER LAST NAME"
            Label:
                id: emailLabel
                text: "E-MAIL ADDRESS:"
                color: (0, 0, 0, 1)
            TextInput:
                id: email
                hint_text: "ENTER E-MAIL ADDRESS"
            Label:
                id: telephoneLabel
                text: "TELEPHONE NUMBER:"
                color: (0, 0, 0, 1)
            TextInput:
                id: telephone
                hint_text: "ENTER TELEPHONE NUMBER"
        BoxLayout:
            orientation: "horizontal"
            RoundedButton:
                text: "BACK"
                background_color: utils.get_color_from_hex("#CED3DC")
                color: (0, 0, 0, 1)
                on_release: app.root.current = "roomWindow"
            RoundedButton:
                text: "BOOK"
                on_release: app.root.current = "actionWindow" if root.registerPress() else Factory.BookWindowPopup().open()

<BrowserWindow>:
    name: "browserWindow"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    on_pre_enter: if app.renderBrowser: main.add_widget(root.createBooksRows())
    BoxLayout:
        orientation: "vertical"
        padding: 30
        id: main
        BoxLayout:
            id: buttonsRow
            orientation: "horizontal"
            size_hint_y: None
            height: 41
            TextInput:
                hint_text: "LAST NAME, EMAIL, ETC."
                size_hint_x: None
                width: 200
            Spinner:
                text:"CATEGORY"
                values: ["ROOM", "LAST NAME", "E-MAIL", "START DATE", "END DATE"]
                size_hint_y: None
                height: 40
            RoundedButton:
                text: "SEARCH"
                size_hint_y: None
                height: 40
                on_press: print(app.bookToUpdate)
            Button:
                text: "BACK"
                size_hint_y: None
                height: 40
                background_color: utils.get_color_from_hex("#CED3DC")
                color: (0, 0, 0, 1)
                on_release: app.root.current = "actionWindow"
            Button:
                text: "UPDATE"
                size_hint_y: None
                height: 40
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: app.root.current = 'dateWindow'
            Button:
                text: "DELETE"
                size_hint_y: None
                height: 40
                background_color: utils.get_color_from_hex("#90C2E7")
                color: (0, 0, 0, 1)
                on_release: root.deleteBook()
        GridLayout:
            padding: [30, 10, 30, 0]
            cols: 6
            spacing: 20
            Label:
                text: "ROOM"
                color: (0, 0, 0, 1)
                size_hint_x: None
                width: 50
            Label:
                text: "LAST NAME"
                color: (0, 0, 0, 1)
            Label:
                text: "E-MAIL"
                color: (0, 0, 0, 1)
            Label:
                text: "START DATE"
                color: (0, 0, 0, 1)
                size_hint_x: None
                width: 90
            Label:
                text: "END DATE"
                color: (0, 0, 0, 1)
                size_hint_x: None
                width: 90
            Label:
                text: "EDITION"
                color: (0, 0, 0, 1)
                size_hint_x: None
                width: 60

