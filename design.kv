#: import utils kivy.utils
#: import Factory kivy.factory.Factory
#: import WipeTransition kivy.uix.screenmanager.WipeTransition

<TextInput>
    multiline: False
    background_color: utils.get_color_from_hex("#FCF7F8")
    font_name: "OpenSans-Semibold"
    halign: 'center'
    valign: 'middle'
    font_size: 12
<Label>
    background_normal: ""
    background_color: (206/255, 211/255, 220/255, 1)
    color: (0, 0, 0, 1)
    font_name: "OpenSans-Semibold"
    font_size: 15
<Button>
    background_normal: ""
    background_color: utils.get_color_from_hex("#90C2E7")
    font_name: "OpenSans-Semibold"
    canvas.before:
        Color:
            rgba: .5, .5, .5, 1
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height
<Spinner>
    color: (1, 1, 1, 1)
<Popup>
    auto_dismiss: True
    background: "popupBackground.png"
    size_hint: 0.6, 0.2
    pos_hint: {"x": 0.2, "top": 0.6}
    font_name: "OpenSans-Semibold"
    title: "WARNING"
    title_color: (163/255, 22/255, 33/255, 1)
    title_align: "center"
    title_font: "OpenSans-Semibold"
    title_size: '20sp'
    separator_color: utils.get_color_from_hex("#4E8098")
<RoundedButton@Button>
    background_color: utils.get_color_from_hex("#A31621")
    color: (1, 1, 1, 1)
    size_hint_y: None
    height: 50
<LoginPopup@Popup>
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        Label:
            text: "INCORRECT LOGIN OR PASSWORD"
        Button:
            text: "OK"
            on_release: root.dismiss()

WindowManager:
    transition: WipeTransition()
	LoginWindow:
	RegisterWindow:
	DateWindow:


<LoginWindow>:
	name: "loginWindow"
    login: login
    password: password
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        padding: 150
        spacing: 10
        Label:
            id: loginLabel
            text: "USERNAME:"
            font_size: 30
            size_hint_y: None
            height: 50
        TextInput:
            id: login
            hint_text: "ENTER USERNAME"
            size_hint_y: None
            height: 50
            font_size: 20
        Label:
            id: passwordLabel
            text: "PASSWORD:"
            font_size: 30
            size_hint_y: None
            height: 50
        TextInput:
            id: password
            hint_text: "ENTER PASSWORD"
            password: True
            size_hint_y: None
            height: 50
            font_size: 20
        RoundedButton:
            text: "LOGIN"
            font_size: 30
            on_release: app.root.current = root.loginPress()[1] if root.loginPress()[0] else Factory.LoginPopup().open()


<DateWindow>:
    name: "dateWindow"
    startDay: startDay
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
    spinner: startDay
    on_enter: root.limit_spinner()
    BoxLayout:
        orientation: "vertical"
        padding: 140
        spacing: 10
        Label:
            font_size: 20
            text: "START DATE"
        GridLayout:
            cols: 3
            Spinner:
                id: startDay
                text: root.currentDay # TODO manage days that are in selected month
                background_color: utils.get_color_from_hex("#4E8098")
                size_hint_y: None
                height: 50
                values: root.days
            Spinner:
                id: startMonth
                text: root.months[root.currentMonth-1]
                background_color: utils.get_color_from_hex("#4E8098")
                size_hint_y: None
                height: 50
                on_text: root.daysInSelectedMonth()
                values: ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"]
            Spinner:
                id: startYear
                text: root.currentYear
                background_color: utils.get_color_from_hex("#4E8098")
                size_hint_y: None
                height: 50
                values: ["2021", "2022", "2023", "2024"]
        Label:
            font_size: 20
            text: "END DATE"
        GridLayout:
            cols: 3
            Spinner:
                id: endDay
                text: root.currentDay # TODO manage days that are in selected month
                background_color: utils.get_color_from_hex("#4E8098")
                size_hint_y: None
                height: 50
                values: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"]
            Spinner:
                id: endMonth
                text: root.months[root.currentMonth-1]
                background_color: utils.get_color_from_hex("#4E8098")
                size_hint_y: None
                height: 50
                values: ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"]
            Spinner:
                id: endYear
                text: root.currentYear
                background_color: utils.get_color_from_hex("#4E8098")
                size_hint_y: None
                height: 50
                values: ["2021", "2022", "2023", "2024"]
        RoundedButton:
            text: "SEARCH"
            font_size: 30
            on_release:
                root.registerPress()






<RegisterWindow>:
	name: "registerWindow"
	spinner: roomNumber
	on_enter: root.limit_spinner()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "gradientBackground.png"
	BoxLayout:
        size: root.width, root.height
	    orientation: "vertical"
        padding: 30
        spacing: 10
        Label:
            text: "REGISTER"
            font_size: 20
            size_hint_y: None
            height: 40
            color: (0, 0, 0, 1)
        GridLayout:
            spacing: 5
            cols: 2
            Label:
                id: firstNameLabel
                text: "FIRST NAME:"
            TextInput:
                id: firstName
                hint_text: "ENTER FIRST NAME"
                on_text: root.manager.get_screen("registerWindow").ids.firstName.text = self.text
            Label:
                id: secondNameLabel
                text: "SECOND NAME:"
            TextInput:
                id: secondName
                hint_text: "ENTER SECOND NAME"
            Label:
                id: addressLabel
                text: "ADDRESS:"
            TextInput:
                id: address
                hint_text: "ENTER ADDRESS"
            Label:
                id: cityLabel
                text: "CITY:"
            TextInput:
                id: city
                hint_text: "ENTER CITY"
            Label:
                id: stateLabel
                text: "STATE:"
            TextInput:
                id: state
                hint_text: "ENTER STATE"
            Label:
                id: zipcodeLabel
                text: "ZIPCODE:"
            TextInput:
                id: zipcode
                hint_text: "ENTER ZIPCODE"
            Label:
                id: roomNumberLabel
                text: "ROOM NUMBER:"
            Spinner:
                id: roomNumber
                text: "choose number window"
                background_color: utils.get_color_from_hex("#4E8098")
                values: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29"]
            Label:
                id: statusLabel
                text: "STATUS:"
            Spinner:
                id: status
                text: "CHOOSE STATUS"
                background_color: utils.get_color_from_hex("#4E8098")
                values: ["CLEAR", "OCCUPIED", "RESERVED"]
                on_text: root.spinnerClicked(status.text)
            Label:
                id: bookStartDateLabel
                text: "BOOK START DATE:"
            Button:
                id: bookStartDate
                text: "CHOOSE START DATE"
            Label:
                id: bookEndDateLabel
                text: "BOOK END DATE:"
            TextInput:
                id: bookEndDate
                hint_text: "calendar popup TODO"
            Label:
                id: paymentStatusLabel
                text: "PAYMENT STATUS:"
            Spinner:
                id: state
                text: "CHOOSE STATUS"
                ackground_color: utils.get_color_from_hex("#4E8098")
        RoundedButton:
            text: "REGISTER"
            font_size: 30
            on_release:
                root.registerPress()






















#	BoxLayout:
#		orientation: "vertical"
#		size: root.width, root.height
#
#		Label:
#			text: "Second Screen"
#			font_size: 32
#
#		Button:
#			text: "Go Back"
#			font_size: 32
#			on_release:
#				app.root.current = "loginWindow"
#				root.manager.transition.direction = "right"


#you can use the root.manager.get_screen('screen_name').widget_id.parameter (like root.manager.get_screen('main_window').label.text) inside your .kv file


